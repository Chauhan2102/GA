<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        window.dataLayer = window.dataLayer || [];
        </script>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PF8RZW34');</script>
    <!-- End Google Tag Manager -->
    <link rel="stylesheet" href="../style/nav.css">
    <link rel="stylesheet" href="../style/buy.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Purchase</title>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PF8RZW34"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
     
    <!-- Navigation Bar -->
    <nav class="nav-bar">
        <div class="nav-text">
            <h2>Welcome!</h2>
        </div>
        <div class="nav-a">
            <a href="./home.html" class="nav-a home-link">Home</a>
            <a href="./newsletter.html" class="nav-a news-link">NewsLetter</a>
            <a href="./login.html" class="nav-a Profile-link">Profile</a>
            <a href="./contact.html" class="nav-a contact-link">Contact us</a>
            <a href="./purchasebook.html" class="nav-a buy-link">Buy</a>
        </div>
    </nav>

    <!-- Book Purchase Section -->
    <h1>Purchase Your Favorite Books</h1>

    <!-- Cart-like layout for books -->
    <div class="book-container">
        <div class="book-card">
            <img src="../images/book1.jpg" alt="Book 1">
            <h3>Bhagavat Gita </h3>
            <p>Price: $10</p>
            <p>Description: The lessons of life how to live</p>
            <label for="quantity1">Quantity:</label>
            <input type="number" id="quantity1" name="quantity" min="1" value="1" data-price="10" class="quantity-input">
            <button class="add-to-cart" data-book="Book 1" data-price="10">Add to Cart</button>
            <div><a href="./tutorial.html" class="tutorial-link">Tutorial</a></div>
        </div>

        <div class="book-card">
            <img src="../images/book2.jpg" alt="Book 2">
            <h3>Ramayan</h3>
            <p>Price: $15</p>
            <p>Description: The Life of Lord Rama</p>
            <label for="quantity2">Quantity:</label>
            <input type="number" id="quantity2" name="quantity" min="1" value="1" data-price="15" class="quantity-input">
            <button class="add-to-cart" data-book="Book 2" data-price="15">Add to Cart</button>
            <div><a href="./tutorial.html" class="tutorial-link">Tutorial</a></div>
        </div>

        <div class="book-card">
            <img src="../images/book3.jpg" alt="Book 3">
            <h3>Shiv Shakti</h3>
            <p>Price: $20</p>
            <p>Description: The Shiv Shakti Power</p>
            <label for="quantity3">Quantity:</label>
            <input type="number" id="quantity3" name="quantity" min="1" value="1" data-price="20" class="quantity-input">
            <button class="add-to-cart" data-book="Book 3" data-price="20">Add to Cart</button>
            <div><a href="./tutorial.html" class="tutorial-link">Tutorial</a></div>
        </div>
    </div>

    <!-- Cart Section -->
    <div class="cart-container">
        <h2>Your Cart</h2>
        <ul id="cart-items"></ul>
        <h3>Total: $<span id="total-price">0.00</span></h3>
        <button id="checkout-btn">Checkout</button>
    </div>

    <script src="../functions/cart.js"></script>

    <!-- DataLayer push code is placed below here for view_item_list event -->
    <script>
  // Clear any previous ecommerce data
  dataLayer.push({ ecommerce: null });  // Clears any previous ecommerce data
  

  // Push new event data to dataLayer
  dataLayer.push({
    event: "view_item_list",  // Event name
    ecommerce: {
      item_list_id: "books_on_sale",  // Unique list ID
      item_list_name: "Purchase Your Favorite Books",  // Name of the list
      items: [
        {
          item_id: "b1",  // Unique item ID (SKU or another identifier)
          item_name: document.querySelector(".book-card:nth-child(1) h3").innerText,  // Dynamically fetch the book name
          affiliation: "Book Store",  // Name of the store (can be dynamic)
          price: document.querySelector(".book-card:nth-child(1) .quantity-input").getAttribute('data-price'),  // Fetch price from data-price attribute
          quantity: document.querySelector("#quantity1").value,  // Dynamically get quantity selected by user
          item_category: "Books",  // Static or dynamic category (if applicable)
          item_variant: "Standard",  // Variant of the item (if applicable, like edition or color)
          location_id: "ChIJIQBpAG2ahYAR_6128GcTUEo",  // Store location ID (optional, if needed)
          item_list_id: "books_on_sale",  // Same list ID as above
          item_list_name: "Purchase Your Favorite Books",  // Same list name as above
        },
        {
          item_id: "b2",  // Unique item ID for second book
          item_name: document.querySelector(".book-card:nth-child(2) h3").innerText,  // Dynamically fetch second book name
          affiliation: "Book Store",
          price: document.querySelector(".book-card:nth-child(2) .quantity-input").getAttribute('data-price'),
          quantity: document.querySelector("#quantity2").value,
          item_category: "Books",
          item_variant: "Standard",
          location_id: "ChIJIQBpAG2ahYAR_6128GcTUEo",
          item_list_id: "books_on_sale",
          item_list_name: "Purchase Your Favorite Books",
        },
        {
          item_id: "b3",  // Unique item ID for third book
          item_name: document.querySelector(".book-card:nth-child(3) h3").innerText,  // Dynamically fetch third book name
          affiliation: "Book Store",
          price: document.querySelector(".book-card:nth-child(3) .quantity-input").getAttribute('data-price'),
          quantity: document.querySelector("#quantity3").value,
          item_category: "Books",
          item_variant: "Standard",
          location_id: "ChIJIQBpAG2ahYAR_6128GcTUEo",
          item_list_id: "books_on_sale",
          item_list_name: "Purchase Your Favorite Books",
        }
      ]
    }
  });
</script>

</body>
</html>
